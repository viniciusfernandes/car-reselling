databaseChangeLog:
  - changeSet:
      id: vinicius-20260123-01
      author: vinicius
      changes:
        - sql:
            sql: |
              CREATE TABLE IF NOT EXISTS partners (
                id CHAR(36) PRIMARY KEY,
                name VARCHAR(255) NOT NULL UNIQUE,
                city VARCHAR(255) NULL,
                commission_rate DECIMAL(6,2) NULL,
                created_at DATETIME NOT NULL,
                updated_at DATETIME NULL
              );

              CREATE TABLE IF NOT EXISTS vehicles (
                id CHAR(36) PRIMARY KEY,
                license_plate VARCHAR(16) NOT NULL UNIQUE,
                renavam VARCHAR(32) NULL UNIQUE,
                vin VARCHAR(64) NULL UNIQUE,
                year INT NOT NULL,
                color VARCHAR(64) NOT NULL,
                model VARCHAR(128) NOT NULL,
                brand VARCHAR(128) NOT NULL,
                supplier_source VARCHAR(32) NOT NULL,
                purchase_price DECIMAL(13,2) NOT NULL,
                freight_cost DECIMAL(13,2) NOT NULL DEFAULT 0,
                purchase_payment_receipt_document_id CHAR(36) NULL,
                purchase_invoice_document_id CHAR(36) NULL,
                status VARCHAR(32) NOT NULL,
                assigned_partner_id CHAR(36) NULL,
                created_at DATETIME NOT NULL,
                updated_at DATETIME NULL,
                KEY idx_vehicles_status (status),
                KEY idx_vehicles_plate (license_plate),
                KEY idx_vehicles_partner (assigned_partner_id),
                CONSTRAINT fk_vehicles_partner FOREIGN KEY (assigned_partner_id) REFERENCES partners(id)
              );

              CREATE TABLE IF NOT EXISTS services (
                id CHAR(36) PRIMARY KEY,
                vehicle_id CHAR(36) NOT NULL,
                service_type VARCHAR(32) NOT NULL,
                description VARCHAR(500) NULL,
                service_value DECIMAL(13,2) NOT NULL,
                performed_at DATE NULL,
                created_at DATETIME NOT NULL,
                updated_at DATETIME NULL,
                KEY idx_services_vehicle (vehicle_id),
                CONSTRAINT fk_services_vehicle FOREIGN KEY (vehicle_id) REFERENCES vehicles(id)
              );

              CREATE TABLE IF NOT EXISTS documents (
                id CHAR(36) PRIMARY KEY,
                vehicle_id CHAR(36) NOT NULL,
                document_type VARCHAR(32) NOT NULL,
                original_file_name VARCHAR(512) NOT NULL,
                content_type VARCHAR(255) NOT NULL,
                size_bytes BIGINT NOT NULL,
                storage_key VARCHAR(1024) NOT NULL,
                uploaded_at DATETIME NOT NULL,
                uploaded_by VARCHAR(128) NULL,
                KEY idx_documents_vehicle (vehicle_id),
                CONSTRAINT fk_documents_vehicle FOREIGN KEY (vehicle_id) REFERENCES vehicles(id)
              );

  - changeSet:
      id: vinicius-20260123-02
      author: vinicius
      changes:
        - sql:
            sql: |
              INSERT INTO partners (id, name, city, commission_rate, created_at)
              VALUES
                (UUID(), 'Partner A', 'Sao Paulo', NULL, NOW()),
                (UUID(), 'Partner B', 'Rio de Janeiro', NULL, NOW());

  - changeSet:
      id: vinicius-20260123-03
      author: vinicius
      validCheckSum: ANY
      changes:
        - sql:
            sql: |
              INSERT INTO vehicles (
                id, license_plate, year, color, model, brand, supplier_source,
                purchase_price, freight_cost, status, created_at, updated_at
              ) VALUES (
                UUID(), 'ABC1234', 2019, 'Black', 'Civic', 'Honda',
                'INTERNET', 85000.00, 0, 'IN_LOT', NOW(), NOW()
              );
  - changeSet:
      id: vinicius-20260130-01
      author: vinicius
      changes:
        - sql:
            sql: |
              ALTER TABLE vehicles
                ADD COLUMN selling_price DECIMAL(13,2) NULL AFTER freight_cost;